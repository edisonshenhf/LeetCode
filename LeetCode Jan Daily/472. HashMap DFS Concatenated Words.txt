class Solution {
    Set<String> set = new HashSet<>();
    public List<String> findAllConcatenatedWordsInADict(String[] words) {
        List<String> res = new ArrayList<>();
        for(String word:words) set.add(word);
        for(String word:words){
            int n = word.length();
            if(dfs(0,0,n,word,words)) res.add(word);
        }
        return res;
    }

    boolean dfs(int cnt, int u, int n, String word,String[] words){
        if(u==n){
            if(cnt>=2) return true;
            return false;
        }
        for(int i=u;i<n;i++){
            if(set.contains(word.substring(u,i+1))){
                if(dfs(cnt+1,i+1,n,word,words)) return true;
            }
        }
        return false;
    }
}